#!/usr/bin/env ruby

require_relative '../lib/rubyhome'

Rubyhome::AccessoryInformationFactory.new.save
fan = Rubyhome::FanFactory.new
fan.save

fan.on.on(:value_updated) do |new_value|
  if new_value == 1
    puts "Fan switched on"
  else
    puts "Fan switched off"
  end
end

Rubyhome::Broadcast.run
